-# ãƒ‘ãƒ³ããš
- breadcrumb :show

.card
  .card-menu
    - if user_signed_in? && current_user.id == @item.user_id
      .card-edit
        = link_to "ç·¨é›†ã™ã‚‹", edit_item_path
      .card-delete
        = link_to "å‰Šé™¤ã™ã‚‹", item_path(@item), method: :delete, class: "item_delete", data: { confirm: "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ" }
  .card-title
    %h1.text-title
      %span.card-text
      = @item.title
    %p.text-top
      %span.card-text
    - @item.images.each do |image|
      = image_tag image.image.url, class: "item_image" if image.image.present?
    %h4.text-center
      %span.card-proce
      = "Â¥#{@item.price}"
    %p.text-bottom
      %span.card-text
      = @item.text
  .card-cash
    - unless user_signed_in? && current_user.id == @item.user_id
      %h1.cash-cash= link_to "è³¼å…¥æ‰‹ç¶šãã¸", buy_path(@item)
  .card-table
    %table{:border => 1, :width => "50%"} 
      %tr
        %th ç™»éŒ²æ—¥æ™‚
        %td= @item.created_at.strftime("%Yå¹´%-mæœˆ%-dæ—¥")
      %tr
        %th å‡ºå“è€…
        %td= link_to @item.user.name, user_path(@item.user.id)
      %tr
        %th ã‚«ãƒ†ã‚´ãƒªãƒ¼
        %td
          = @item.category.parent.parent.name
          %span >
          = @item.category.parent.name
          %span >
          = @item.category.name

      %tr
        %th ãƒ–ãƒ©ãƒ³ãƒ‰
        %td= @item.brand
      %tr
        %th å•†å“ã®çŠ¶æ…‹
        %td= @item.condition
      %tr
        %th åœ¨åº«
        %td= @item.stock
      %tr
        %th é…é€æ–™ã®è² æ‹…
        %td é€æ–™è¾¼ã¿(å‡ºå“è€…è² æ‹…)
      %tr
        %th é…é€å…ƒã®åœ°åŸŸ
        %td æ±äº¬
      %tr
        %th é…é€æ–¹æ³•
        %td= @item.delivery.name
      %tr
        %th é…é€ç›®å®‰
        %td=  "#{@item.leadtime}æ—¥ã§ç™ºé€"

  .btn-bar 
    .btn-box
      = render partial: "items/like", locals: { item: @item, like: @like }


  .card-comment
    - if @item.comments.any?
      %table{:border => 1, :width => "50%", :flame => "box", :rules => "none"}
        %tr
          %th ãƒ¦ãƒ¼ã‚¶ãƒ¼å
          %td 
            %td__title ã‚³ãƒ¡ãƒ³ãƒˆ
          %th
      - @item.comments.each do |comment|
        %table{:border => 1, :width => "50%", :flame => "box", :rules => "none"}
          %tr
            %th= comment.user.name
            %td 
              %td__text=comment.text  
    - else 
      %table{:border => 1, :width => "50%", :flame => "box", :rules => "none"}
        %tr
          %th ãƒ¦ãƒ¼ã‚¶ãƒ¼å
          %td 
            %td__title ã‚³ãƒ¡ãƒ³ãƒˆ
          %th
      - @item.comments.each do |comment|
        %table{:border => 1, :width => "50%", :flame => "box", :rules => "none"}
          %tr
            %th= comment.user.name
            %td
              %td__text=comment.text 

.warning
  %p.text-waring
    %span.card-warning ç›¸æ‰‹ã®äº‹ã‚’è€ƒãˆä¸å¯§ãªã‚³ãƒ¡ãƒ³ãƒˆã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚
    %br
    %span.card-warning ä¸å¿«ãªè¨€è‘‰é£ã„ã¯åˆ©ç”¨åˆ¶é™ã‚„é€€ä¼šå‡¦åˆ†ã«ãªã‚‹äº‹ãŒã‚ã‚Šã¾ã™ã€‚
.form
  = form_with model: [@item, @comment], local: true, id: "new_comment" do |f|
    = f.hidden_field :item_id, { value: @item.id}
    = f.hidden_field :user_id, { value: 1 }
    = f.text_area :text, class: "form-area"
    = f.submit "ğŸ’¬ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹", class: "submit"
